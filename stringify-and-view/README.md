## json-viewer.js

A powerful, interactive, and collapsible JSON viewer for web applications and static sites. Features syntax highlighting, type labels, path copying, and robust handling of special values (functions, symbols, circular references, etc). Designed for use with Eleventy or as a standalone module.

---

### Features
- Collapsible, interactive tree view for JSON data
- Syntax highlighting for types (string, number, boolean, null, undefined, function, symbol, date, circular refs)
- UI controls: show/hide type labels, show key paths on hover, expand/collapse all
- Handles special values: functions, symbols, BigInts, Dates, circular references, Eleventy quirks
- Copy key paths to clipboard
- Customizable via options

---

### Installation

Place `json-viewer.js` in your project. Requires no dependencies for browser use. For testing, uses `vitest` and `jsdom`.

---

### Usage

#### As an Eleventy filter or in Node:
```js
import jsonViewer from './json-viewer.js';

// Render HTML for a JSON object
const html = await jsonViewer({ foo: 'bar', arr: [1,2,3] }, { showTypes: true });
// Insert `html` into your page or template
```

#### In the browser (standalone):
```html
<!-- The output of jsonViewer() includes all required CSS and JS -->
<div id="my-json-viewer"></div>
<script>
  // The HTML generated by jsonViewer() will render the viewer in the target div
</script>
```

---

### API Reference

#### `default export (jsonViewer)`
- **Signature:** `async function jsonViewer(json, options = {})`
- **Returns:** HTML string (includes CSS, JS, and the viewer container)
- **Options:**
  - `showTypes` (boolean): Show type labels (default: true)
  - `defaultExpanded` (boolean): Expand all nodes by default (default: false)
  - `pathsOnHover` (boolean): Show key path panel on hover (default: false)
  - `showControls` (boolean): Show UI controls (default: true)
  - `indentWidth` (number): Indentation per level in px (default: 8)
  - `removeTemplate` (boolean): Replace any `template` key with a marker (default: false)

#### `JSONViewerModule.generate(json, options)`
- Returns the full HTML for the viewer (CSS, container, JS)

#### `JSONViewerModule.getScript(containerId, options)`
- Returns the JS code for the viewer (for custom embedding)

#### `JSONViewerModule.getStyles()`
- Returns the CSS styles for the viewer

---

### Example
```js
import jsonViewer from './json-viewer.js';
const data = { foo: 'bar', arr: [1,2,3], nested: { a: 1 } };
const html = await jsonViewer(data, { showTypes: true, pathsOnHover: true });
// Insert html into your page
```

---

### Testing

Tests are provided in `json-viewer.test.js` using [Vitest](https://vitest.dev/) and [jsdom](https://github.com/jsdom/jsdom):
```sh
vitest run stringify-and-view/json-viewer.test.js
```

---

### Contributing & License

Contributions welcome! Please open issues or PRs for improvements or bugfixes.

MIT License. 